/* <geolocation-display> Web Component */

class GeolocationDisplay extends HTMLElement {
	static data = {"AW":"ğŸ‡¦ğŸ‡¼","AF":"ğŸ‡¦ğŸ‡«","AO":"ğŸ‡¦ğŸ‡´","AL":"ğŸ‡¦ğŸ‡±","AE":"ğŸ‡¦ğŸ‡ª","AR":"ğŸ‡¦ğŸ‡·","AM":"ğŸ‡¦ğŸ‡²","AG":"ğŸ‡¦ğŸ‡¬","AU":"ğŸ‡¦ğŸ‡º","AT":"ğŸ‡¦ğŸ‡¹","AZ":"ğŸ‡¦ğŸ‡¿","BI":"ğŸ‡§ğŸ‡®","BE":"ğŸ‡§ğŸ‡ª","BJ":"ğŸ‡§ğŸ‡¯","BF":"ğŸ‡§ğŸ‡«","BD":"ğŸ‡§ğŸ‡©","BG":"ğŸ‡§ğŸ‡¬","BH":"ğŸ‡§ğŸ‡­","BS":"ğŸ‡§ğŸ‡¸","BA":"ğŸ‡§ğŸ‡¦","BY":"ğŸ‡§ğŸ‡¾","BZ":"ğŸ‡§ğŸ‡¿","BM":"ğŸ‡§ğŸ‡²","BO":"ğŸ‡§ğŸ‡´","BR":"ğŸ‡§ğŸ‡·","BB":"ğŸ‡§ğŸ‡§","BN":"ğŸ‡§ğŸ‡³","BT":"ğŸ‡§ğŸ‡¹","BW":"ğŸ‡§ğŸ‡¼","CF":"ğŸ‡¨ğŸ‡«","CA":"ğŸ‡¨ğŸ‡¦","CH":"ğŸ‡¨ğŸ‡­","CL":"ğŸ‡¨ğŸ‡±","CN":"ğŸ‡¨ğŸ‡³","CI":"ğŸ‡¨ğŸ‡®","CM":"ğŸ‡¨ğŸ‡²","CD":"ğŸ‡¨ğŸ‡©","CG":"ğŸ‡¨ğŸ‡¬","CO":"ğŸ‡¨ğŸ‡´","KM":"ğŸ‡°ğŸ‡²","CV":"ğŸ‡¨ğŸ‡»","CR":"ğŸ‡¨ğŸ‡·","CW":"ğŸ‡¨ğŸ‡¼","KY":"ğŸ‡°ğŸ‡¾","CY":"ğŸ‡¨ğŸ‡¾","CZ":"ğŸ‡¨ğŸ‡¿","DE":"ğŸ‡©ğŸ‡ª","DJ":"ğŸ‡©ğŸ‡¯","DM":"ğŸ‡©ğŸ‡²","DK":"ğŸ‡©ğŸ‡°","DO":"ğŸ‡©ğŸ‡´","DZ":"ğŸ‡©ğŸ‡¿","EC":"ğŸ‡ªğŸ‡¨","EG":"ğŸ‡ªğŸ‡¬","ES":"ğŸ‡ªğŸ‡¸","EE":"ğŸ‡ªğŸ‡ª","ET":"ğŸ‡ªğŸ‡¹","FI":"ğŸ‡«ğŸ‡®","FJ":"ğŸ‡«ğŸ‡¯","FR":"ğŸ‡«ğŸ‡·","FM":"ğŸ‡«ğŸ‡²","GA":"ğŸ‡¬ğŸ‡¦","GB":"ğŸ‡¬ğŸ‡§","GE":"ğŸ‡¬ğŸ‡ª","GH":"ğŸ‡¬ğŸ‡­","GN":"ğŸ‡¬ğŸ‡³","GM":"ğŸ‡¬ğŸ‡²","GW":"ğŸ‡¬ğŸ‡¼","GQ":"ğŸ‡¬ğŸ‡¶","GR":"ğŸ‡¬ğŸ‡·","GD":"ğŸ‡¬ğŸ‡©","GT":"ğŸ‡¬ğŸ‡¹","GY":"ğŸ‡¬ğŸ‡¾","HK":"ğŸ‡­ğŸ‡°","HN":"ğŸ‡­ğŸ‡³","HR":"ğŸ‡­ğŸ‡·","HT":"ğŸ‡­ğŸ‡¹","HU":"ğŸ‡­ğŸ‡º","ID":"ğŸ‡®ğŸ‡©","IN":"ğŸ‡®ğŸ‡³","IE":"ğŸ‡®ğŸ‡ª","IR":"ğŸ‡®ğŸ‡·","IQ":"ğŸ‡®ğŸ‡¶","IS":"ğŸ‡®ğŸ‡¸","IL":"ğŸ‡®ğŸ‡±","IT":"ğŸ‡®ğŸ‡¹","JM":"ğŸ‡¯ğŸ‡²","JO":"ğŸ‡¯ğŸ‡´","JP":"ğŸ‡¯ğŸ‡µ","KZ":"ğŸ‡°ğŸ‡¿","KE":"ğŸ‡°ğŸ‡ª","KG":"ğŸ‡°ğŸ‡¬","KH":"ğŸ‡°ğŸ‡­","KI":"ğŸ‡°ğŸ‡®","KN":"ğŸ‡°ğŸ‡³","KR":"ğŸ‡°ğŸ‡·","KW":"ğŸ‡°ğŸ‡¼","LA":"ğŸ‡±ğŸ‡¦","LB":"ğŸ‡±ğŸ‡§","LR":"ğŸ‡±ğŸ‡·","LY":"ğŸ‡±ğŸ‡¾","LC":"ğŸ‡±ğŸ‡¨","LK":"ğŸ‡±ğŸ‡°","LS":"ğŸ‡±ğŸ‡¸","LT":"ğŸ‡±ğŸ‡¹","LU":"ğŸ‡±ğŸ‡º","LV":"ğŸ‡±ğŸ‡»","MO":"ğŸ‡²ğŸ‡´","MA":"ğŸ‡²ğŸ‡¦","MD":"ğŸ‡²ğŸ‡©","MG":"ğŸ‡²ğŸ‡¬","MV":"ğŸ‡²ğŸ‡»","MX":"ğŸ‡²ğŸ‡½","MH":"ğŸ‡²ğŸ‡­","MK":"ğŸ‡²ğŸ‡°","ML":"ğŸ‡²ğŸ‡±","MT":"ğŸ‡²ğŸ‡¹","MM":"ğŸ‡²ğŸ‡²","ME":"ğŸ‡²ğŸ‡ª","MN":"ğŸ‡²ğŸ‡³","MZ":"ğŸ‡²ğŸ‡¿","MR":"ğŸ‡²ğŸ‡·","MU":"ğŸ‡²ğŸ‡º","MW":"ğŸ‡²ğŸ‡¼","MY":"ğŸ‡²ğŸ‡¾","NA":"ğŸ‡³ğŸ‡¦","NE":"ğŸ‡³ğŸ‡ª","NG":"ğŸ‡³ğŸ‡¬","NI":"ğŸ‡³ğŸ‡®","NL":"ğŸ‡³ğŸ‡±","NO":"ğŸ‡³ğŸ‡´","NP":"ğŸ‡³ğŸ‡µ","NR":"ğŸ‡³ğŸ‡·","NZ":"ğŸ‡³ğŸ‡¿","OM":"ğŸ‡´ğŸ‡²","PK":"ğŸ‡µğŸ‡°","PA":"ğŸ‡µğŸ‡¦","PE":"ğŸ‡µğŸ‡ª","PH":"ğŸ‡µğŸ‡­","PW":"ğŸ‡µğŸ‡¼","PG":"ğŸ‡µğŸ‡¬","PL":"ğŸ‡µğŸ‡±","PR":"ğŸ‡µğŸ‡·","PT":"ğŸ‡µğŸ‡¹","PY":"ğŸ‡µğŸ‡¾","PS":"ğŸ‡µğŸ‡¸","QA":"ğŸ‡¶ğŸ‡¦","RO":"ğŸ‡·ğŸ‡´","RU":"ğŸ‡·ğŸ‡º","RW":"ğŸ‡·ğŸ‡¼","SA":"ğŸ‡¸ğŸ‡¦","SD":"ğŸ‡¸ğŸ‡©","SN":"ğŸ‡¸ğŸ‡³","SG":"ğŸ‡¸ğŸ‡¬","SB":"ğŸ‡¸ğŸ‡§","SL":"ğŸ‡¸ğŸ‡±","SV":"ğŸ‡¸ğŸ‡»","SM":"ğŸ‡¸ğŸ‡²","SO":"ğŸ‡¸ğŸ‡´","RS":"ğŸ‡·ğŸ‡¸","ST":"ğŸ‡¸ğŸ‡¹","SR":"ğŸ‡¸ğŸ‡·","SK":"ğŸ‡¸ğŸ‡°","SI":"ğŸ‡¸ğŸ‡®","SE":"ğŸ‡¸ğŸ‡ª","SZ":"ğŸ‡¸ğŸ‡¿","SX":"ğŸ‡¸ğŸ‡½","SC":"ğŸ‡¸ğŸ‡¨","TC":"ğŸ‡¹ğŸ‡¨","TD":"ğŸ‡¹ğŸ‡©","TG":"ğŸ‡¹ğŸ‡¬","TH":"ğŸ‡¹ğŸ‡­","TJ":"ğŸ‡¹ğŸ‡¯","TL":"ğŸ‡¹ğŸ‡±","TO":"ğŸ‡¹ğŸ‡´","TT":"ğŸ‡¹ğŸ‡¹","TN":"ğŸ‡¹ğŸ‡³","TR":"ğŸ‡¹ğŸ‡·","TV":"ğŸ‡¹ğŸ‡»","TZ":"ğŸ‡¹ğŸ‡¿","UG":"ğŸ‡ºğŸ‡¬","UA":"ğŸ‡ºğŸ‡¦","UY":"ğŸ‡ºğŸ‡¾","US":"ğŸ‡ºğŸ‡¸","UZ":"ğŸ‡ºğŸ‡¿","VC":"ğŸ‡»ğŸ‡¨","VN":"ğŸ‡»ğŸ‡³","VU":"ğŸ‡»ğŸ‡º","WS":"ğŸ‡¼ğŸ‡¸","ZA":"ğŸ‡¿ğŸ‡¦","ZM":"ğŸ‡¿ğŸ‡²","ZW":"ğŸ‡¿ğŸ‡¼"};

	fetchAutoCountryCode() {
		// CloudCannon
		for(let cls of document.documentElement.classList) {
			if(cls.startsWith("country-")) {
				return cls.slice("country-".length);
			}
		}
	}

	getPrefix() {
		return this.getAttribute("prefix") || "";
	}

	getSuffix() {
		return this.getAttribute("suffix") || "";
	}

	connectedCallback() {
		let code = this.fetchAutoCountryCode()?.toUpperCase();
		let flag = GeolocationDisplay.data[code];
		if(code || flag) {
			this.textContent = `${this.getPrefix()}${code}${flag ? ` ${flag}` : ""}${this.getSuffix()}`;
		}
	}
}

if("customElements" in window) {
	window.customElements.define("geolocation-display", GeolocationDisplay);
}
